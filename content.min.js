function processResponse(e){var t,n=$("#toplevel_page_woocommerce ul.wp-submenu");n.length<1&&$.when($.get(protocol+"//"+site+"/wp-admin/",function(e){})).done(function(e){n=$("#toplevel_page_woocommerce ul.wp-submenu",e)}),subLinks=$("li a",e);var o=subLinks.length;$(subLinks).each(function(a){var c=($(this),$(this).attr("href"));$.when($.get(c,function(e){underLinks[a]=$("ul.subsubsub",e)}).done(function(){if(underLinks.length>=o){t=$(e).html().split("<li>");for(key in underLinks)htmlKey=parseInt(key)+1,"undefined"!=typeof underLinks[key][0]&&(t[htmlKey]+="<li>"+underLinks[key][0].outerHTML+"</li>");t[0]='<li class="no-indent">'+t[0]+"</li>",t="<ul>"+t.join("<li>")+"</ul>",t+="<ul>",$("a",n).each(function(){c=protocol+"//"+site+"/wp-admin/"+$(this).attr("href"),text=$(this).text(),t+='<li><a href="'+c+'" tabindex="-1">'+text+"</a></li>"}),t+="</ul>",t+="<hr>Frontend:<br><ul>";for(a in wcPages)t+=null!==wcPages[a]?"<li><a href="+wcPages[a]+">"+a+"</a></li>":"<li>"+a+" is undefined</li>";t+="</ul>",siteContent=t,message={action:"set-content",value:{site:site,content:siteContent}},chrome.runtime.sendMessage(message,function(e){return!0})}}))})}var siteContent,site,protocol,underLinks=[],noticesDisplayed=!0,wcPages={Cart:null,Checkout:null,"My Account":null,Shop:null};jQuery(document).ready(function(){function e(){var e,t="if ('undefined' != typeof ajaxurl) {\n";t+="jQuery('body').attr('tmp_ajaxurl', ajaxurl)}\n",t+="else if ( 'undefined' != typeof woocommerce_params && 'undefined' != typeof woocommerce_params.ajax_url) {\n",t+="jQuery('body').attr('tmp_ajaxurl', woocommerce_params.ajax_url)\n",t+="}";var n=document.createElement("script");return n.id="tmpScript",n.appendChild(document.createTextNode(t)),(document.body||document.head||document.documentElement).appendChild(n),e=jQuery("body").attr("tmp_ajaxurl"),jQuery("#tmpScript").remove(),e}var t=e();if("undefined"!=typeof t){var n=document.createElement("a");n.href=t,site=n.host+n.pathname.replace("/wp-admin/admin-ajax.php",""),protocol=n.protocol,message={action:"have-content",value:{site:site}},chrome.runtime.sendMessage(message,function(e){"undefined"!=e.content&&0==e.content?jQuery.when(jQuery.get(protocol+"//"+site+"/wp-admin/admin.php?page=wc-settings",function(e){links=jQuery("h2.woo-nav-tab-wrapper a, nav.woo-nav-tab-wrapper a",e),wcLinks="<ul>",jQuery(links).each(function(e){anchorText=jQuery(this).html(),href=jQuery(this).attr("href"),e>0&&(wcLinks+="<li>"),wcLinks+='<a href="'+href+'" tabindex="-1">'+anchorText+"</a>",e>0&&(wcLinks+="</li>")}),wcLinks+="</ul>"}).fail(function(e){console.log(e)}).done(function(){jQuery.when(jQuery.get(protocol+"//"+site+"/wp-admin/admin.php?page=wc-settings&tab=products&section=display",function(e){shopPageId=jQuery("#woocommerce_shop_page_id option:selected",e).val(),"undefined"!=typeof shopPageId&&shopPageId.length>0&&(wcPages.Shop=protocol+"//"+site+"/?p="+shopPageId)}).done(function(){})),jQuery.when(jQuery.get(protocol+"//"+site+"/wp-admin/admin.php?page=wc-settings&tab=checkout",function(e){cartPageId=jQuery("#woocommerce_cart_page_id option:selected",e).val(),"undefined"!=typeof cartPageId&&cartPageId.length>0&&(wcPages.Cart=protocol+"//"+site+"/?p="+cartPageId),checkoutPageId=jQuery("#woocommerce_checkout_page_id option:selected",e).val(),"undefined"!=typeof checkoutPageId&&checkoutPageId.length>0&&(wcPages.Checkout=protocol+"//"+site+"/?p="+checkoutPageId)}).done(function(){})),jQuery.when(jQuery.get(protocol+"//"+site+"/wp-admin/admin.php?page=wc-settings&tab=account",function(e){myAccountPageId=jQuery("#woocommerce_myaccount_page_id option:selected",e).val(),"undefined"!=typeof myAccountPageId&&myAccountPageId.length>0&&(wcPages["My Account"]=protocol+"//"+site+"/?p="+myAccountPageId)}).done(function(){})),processResponse(wcLinks)})):(siteContent=e.content,message={action:"update-content",value:siteContent}),chrome.runtime.sendMessage(message,function(e){return!0})}),window.location.href.indexOf("edit.php?post_type=product")>0&&(match=/[0-9]*/,jQuery("td.name.has-row-actions div.row-actions").each(function(){id=jQuery("span.id",jQuery(this)).html().replace(/^\D+/g,"").match(match)[0],jQuery(this).append('<span class="add-to-cart"> | <a href="'+protocol+"//"+site+"?add-to-cart="+id+'">Add to cart</span>')}))}chrome.storage.sync.get({hideYoast:!0},function(e){e.hideYoast&&jQuery(".column-wpseo-score, .column-wpseo-title, #wpseo_meta, .column-wpseo-metadesc, .column-wpseo-focuskw, div.wp-pointer").hide()})}),chrome.runtime.onMessage.addListener(function(e,t,n){if("undefined"!=typeof e.message){if("toggleNotices"==e.message.action&&(show=!noticesDisplayed,jQuery(".notice, .updated, .error, .update-nag").toggle(show),noticesDisplayed=show),"hideYoast"==e.message.action&&(show=!e.message.value,jQuery(".column-wpseo-score, .column-wpseo-title, #wpseo_meta, .column-wpseo-metadesc, .column-wpseo-focuskw, div.wp-pointer").toggle(show)),"whats-the-content"==e.message.action&&("undefined"!=typeof siteContent?n({content:siteContent}):(message={action:"have-content",value:site},chrome.runtime.sendMessage(message,function(e){e.content&&(content=e.content)})),n({content:siteContent})),"helper-active"==e.message.action&&(canSwitch=jQuery('#menu-dashboard > ul a[href$="page=woothemes-helper"]').length>0&&-1==document.documentElement.lang.indexOf("en"),n({content:canSwitch})),"setLanguage"==e.message.action){var o=new Date;o.setTime(o.getTime()+9e5),document.cookie="wooninja_language=en;path=/;expires="+o.toUTCString()+";",location.reload()}if("resetLanguage"==e.message.action){var o=new Date;o.setTime(o.getTime()-9e5),document.cookie="wooninja_language=en;path=/;expires="+o.toUTCString()+";",location.reload()}"language-overridden"==e.message.action&&n({content:document.cookie.indexOf("wooninja_language")>-1})}});